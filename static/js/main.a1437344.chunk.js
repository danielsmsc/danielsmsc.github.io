(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){e.exports=a(187)},108:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},120:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},158:function(e,t){},161:function(e,t,a){},162:function(e,t,a){},176:function(e,t){},178:function(e,t){},186:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),o=a.n(c),i=(a(108),a(102)),s=a(10),l=a(12),u=a(11);var m=function(){return r.a.createElement("div",{className:"app-home"},"This is home component")},d=a(1),p=a.n(d),f=a(3),b=a(2),E=a(19),g=a(6),h=(a(114),Object(n.createContext)("dark"));var v=function(e){var t=e.children,a=Object(n.useState)("dark"),c=Object(b.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("dev-parties-theme")||"dark";i(e)}),[]),Object(n.useEffect)((function(){localStorage.setItem("dev-parties-theme",o)}),[o]),r.a.createElement(h.Provider,{value:{theme:o,toggleTheme:function(){var e=localStorage.getItem("dev-parties-theme");i("light"===e?"dark":"light")}}},r.a.createElement("div",{className:"app-page app-page-".concat(o)},t))},j=a(5),y={dark:{body:"#0a0d14",foreground:"#eee"},light:{body:"#f5f5f5",foreground:"#131313"},common:{primary:"#673AB7"}};a(115);function O(e){var t=Object(n.useContext)(h).theme,a={background:"dark"===t?"rgb(23 29 45)":y.common.primary,boxShadow:"2px 2px 3px ".concat("dark"===t?"#000":"#888")};return r.a.createElement("button",Object.assign({},e,{style:Object(j.a)(Object(j.a)({},a),e.style),className:"app-button"}),e.children)}O.defaultProps={type:"button"};var x=O,k=a(20);a(116);var w=function(e){var t=Object(n.useContext)(h).theme;return r.a.createElement("div",Object.assign({},e,{className:"form-field form-field-".concat(t)}),e.children)},I={baseUrl:"https://dev-parties.herokuapp.com"};a(117);function S(){var e=Object(E.a)(["\n  position: absolute;\n  right: 10px;\n  top: 43px;\n  width: 20px;\n  height: 20px;\n  border: 3px solid ",";\n  border-color: "," "," "," transparent;\n  border-radius: 50%;\n  animation: "," 1s infinite linear;\n"]);return S=function(){return e},e}function N(){var e=Object(E.a)(["\n  0% { transform: rotate(0deg) }\n  100% { transform: rotate(360deg) }\n"]);return N=function(){return e},e}function C(){var e=Object(E.a)(["\n  font-size: 2rem;\n  margin-bottom: 20px;\n"]);return C=function(){return e},e}var _=k.a.h2(C()),A=Object(k.b)(N()),T=k.a.div(S(),y.common.primary,y.common.primary,y.common.primary,y.common.primary,A);var D=function(e){var t=Object(n.useContext)(h).theme,a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,c=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,30}$/,o=Object(n.useState)(""),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],E=m[1],v=Object(n.useState)(!1),j=Object(b.a)(v,2),y=j[0],O=j[1],k=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(t),O(!0),r=t.target.value,e.prev=3,!r||!a.test(r)){e.next=14;break}return E(!0),e.next=8,fetch("".concat(I.baseUrl,"/email-check/").concat(r));case 8:return c=e.sent,e.next=11,c.text();case 11:o=e.sent,200!==c.status?l(o):l(""),E(!1);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(3);case 18:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"app-register",style:{}},r.a.createElement(g.d,{initialValues:{email:"",fullname:"",password:"",repeat_password:""},validate:function(e){var t={};return e.email?a.test(e.email)||(t.email="Invalid email address",l("")):(t.email="Email is required",l("")),e.fullname||(t.fullname="Fullname is required"),e.password?c.test(e.password)||(t.password="Password must contains from 8 to 30 characters and \nmin 1 uppercase letter\nmin 1 lowercase letter\nmin 1 number\n"):t.password="Password is required",e.password!==e.repeat_password&&(t.repeat_password="Passwords are not same"),t},onSubmit:function(){var t=Object(f.a)(p.a.mark((function t(a,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setSubmitting,e.onSubmit(a);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){e.isSubmitting;var a=e.handleBlur,n=e.errors;return r.a.createElement(g.c,{className:"app-form app-form-".concat(t)},r.a.createElement(_,null,r.a.createElement("span",{"aria-label":"party-face-emoji",role:"img"},"\ud83e\udd73"),"Join us!",r.a.createElement("span",{"aria-label":"party-face-emoji",role:"img"},"\ud83e\udd73")),r.a.createElement(w,null,r.a.createElement("label",null,"Your fullname"),r.a.createElement(g.b,{autoFocus:!0,placeholder:"David Bowie",type:"text",name:"fullname"}),r.a.createElement(g.a,{name:"fullname",component:"span"})),r.a.createElement(w,null,d&&r.a.createElement(T,null),r.a.createElement("label",null,"Email (we will send you a confrimation link)"),r.a.createElement(g.b,{onBlur:function(e){return k(e,a)},placeholder:"abc@gmail.com",type:"text",name:"email"}),r.a.createElement("span",null,function(e,t){if(y)return e||t}(s,n.email))),r.a.createElement(w,null,r.a.createElement("label",null,"Password"),r.a.createElement(g.b,{type:"password",name:"password",placeholder:"Do not forget it :)"}),r.a.createElement(g.a,{name:"password",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Repeat password"),r.a.createElement(g.b,{type:"password",name:"repeat_password",placeholder:""}),r.a.createElement(g.a,{name:"repeat_password",component:"span"})),r.a.createElement(x,{type:"submit"},"Sign up!"))})))};var F=function(e){var t=e.history,a=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I.baseUrl+"/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,name:a.fullname,password:a.password,redirectUrl:"".concat(window.location.origin,"/#/login")})});case 2:e.sent.ok&&t.push({pathname:"/confirm",email:a.email});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(D,{onSubmit:a})},R=a(9),U=a(8);var L=function(e){var t={background:y.common.primary,boxShadow:"none",border:"none",outline:"none",color:y.dark.foreground,cursor:"pointer",fontSize:"1.2rem"};return r.a.createElement("button",Object.assign({style:t},e))},z=function(e){return{type:"users/RECIEVE_USER_DATA",payload:e}},B=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.baseUrl,"/users/get/by/id/").concat(e),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,a(z(r));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){var t=e.token,a=e.userId;return localStorage.setItem("signedIn","true"),{type:"auth/RECIEVE_TOKENS",payload:{token:t,userId:a}}},V=function(e,t){return function(){var a=Object(f.a)(p.a.mark((function a(n){var r,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(I.baseUrl,"/auth/login"),{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});case 2:if(!(r=a.sent).ok){a.next=13;break}return localStorage.setItem("signed","true"),a.next=7,r.json();case 7:c=a.sent,n(P(c)),n(B(c.userId)),window.location.href="/#/",a.next=15;break;case 13:localStorage.setItem("signedIn","false"),n({type:"auth/SET_ERROR_TEXT",payload:{errorText:"Incorrect email or password"}});case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};a(120);var Z=Object(s.b)((function(e){return{name:e.user.userData.name,id:e.user.userData._id}}))((function(e){var t=Object(n.useContext)(h),a=t.theme,c=t.toggleTheme,o=Object(n.useState)("closed"),i=Object(b.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)(""),E=Object(b.a)(d,2),g=E[0],v=E[1],j=Object(n.useState)({name:"",id:""}),O=Object(b.a)(j,2),x=O[0],k=O[1];return Object(n.useEffect)((function(){k({name:e.name,id:e.id})}),[e]),r.a.createElement("header",{style:{backgroundColor:y.common.primary},className:"app-header app-header-".concat(a)},g&&r.a.createElement(u.a,{to:g}),r.a.createElement("div",{className:"header-left-side"},r.a.createElement("h1",{style:{cursor:"pointer"},onClick:function(){v("/")}},"DevParties")),r.a.createElement("div",{className:"header-right-side"},r.a.createElement(L,{onClick:c},"light"===a?r.a.createElement(R.a,{icon:U.f}):r.a.createElement(R.a,{icon:U.k})),e.name&&r.a.createElement("div",{onClick:function(){m("open"===s?"closed":"open")},className:"profile-header-settings"},r.a.createElement("a",{style:{color:"#fff"}},x.name),r.a.createElement("ul",{className:"profile-menu ".concat(s),style:{boxShadow:"0 5px 10px ".concat("dark"===a?"#000":"#ccc")}},r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(l.b,{style:{color:y[a].foreground,backgroundColor:y[a].body},to:"/profile/".concat(x.id)},r.a.createElement(R.a,{icon:U.m}),"My Account")),r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(l.b,{style:{color:y[a].foreground,backgroundColor:y[a].body},to:"/settings"},r.a.createElement(R.a,{icon:U.b}),"Settings")),r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(l.b,{to:"/",style:{color:y[a].foreground,backgroundColor:y[a].body},onClick:function(){e.dispatch(function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.baseUrl,"/auth/logout"),{credentials:"include"});case 2:localStorage.setItem("signedIn","false"),t({type:"auth/CLEAR_AUTH_DATA"}),t({type:"users/CLEAR_USER_DATA"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(R.a,{icon:U.j}),"Sign out"))))))}));var Y=function(e){var t=e.location;return t.state,t.email?r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"7rem",margin:"40px"}},"Thank you for registration!",r.a.createElement("span",{"aria-label":"party-emoji",role:"img"},"\ud83c\udf89")),r.a.createElement("h2",{style:{fontSize:"3rem",margin:"40px"}},"Confirmation link has been sent to ",r.a.createElement("span",{style:{textDecoration:"underline"}},t.email))):r.a.createElement(u.a,{path:"home"})};a(122);var q=function(e){var t=Object(n.useContext)(h).theme,a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i;return r.a.createElement("div",{className:"app-login"},r.a.createElement(g.d,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?a.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password||(t.password="Password is required"),t},onSubmit:function(t){return e.onSubmit(t)}},(function(){return r.a.createElement(g.c,{className:"app-form app-form-".concat(t)},r.a.createElement(_,null,"Login to your account!",r.a.createElement("span",{"aria-label":"sipped-face-emoji",role:"img"},"\ud83e\udd10")),r.a.createElement(w,null,r.a.createElement("label",null,"Your email"),r.a.createElement(g.b,{autoFocus:!0,placeholder:"abc@gmail.com",type:"text",name:"email"}),r.a.createElement(g.a,{name:"email",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Your password"),r.a.createElement(g.b,{type:"password",name:"password"}),r.a.createElement(g.a,{name:"password",component:"span"})),e.children,r.a.createElement(x,{type:"submit"},"Login"))})))};function J(){var e=Object(E.a)(["\n  color: rgb(204, 30, 30);\n  font-weight: bold;\n  font-size: 1.2rem;\n  margin-bottom: 20px;\n"]);return J=function(){return e},e}var K=k.a.div(J());var H=Object(s.b)((function(e){return{auth:e.auth,errorText:e.auth.errorText,userId:e.auth.userId}}))((function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2);a[0],a[1],Object(n.useEffect)((function(){}),[e]);var c=e.errorText,o=function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.email,r=a.password,e.dispatch(V(n,r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{onSubmit:o},c&&r.a.createElement(K,null,c)))}));a(123);var M=function(e){var t=e.children,a=e.label;return r.a.createElement("span",{"aria-label":"".concat(a,"-emoji"),role:"img"},t)};var $=function(e){var t=Object(n.useContext)(h).theme,a=e.user,c=function(){var t=Object(f.a)(p.a.mark((function t(a,n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.baseUrl,"/users/invitations/").concat(a,"/").concat(n),{headers:{Authorization:"Bearer: ".concat(e.token)}});case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"app-profile-view"},r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"left-section"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(a.imageSrc,")")},className:"".concat(!a.imageSrc&&"no-photo"," profile-img profile-img-").concat(t)},!a.imageSrc&&a.name.substr(0,2)),r.a.createElement("div",null,e.owner?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.invitations.length>0&&r.a.createElement("h2",{className:"invitations-h2"},"Your invitations:"),r.a.createElement("ul",null,a.invitations.map((function(e){return r.a.createElement("li",{key:e.teamId},r.a.createElement(l.b,{to:"/team/".concat(e.teamId),style:{color:y[t].foreground,textDecoration:"underline"}},e.name),r.a.createElement("button",{onClick:function(){return t=e.teamId,void c("accept",t);var t},className:"accept-invitation-btn"},"Accept"),r.a.createElement("button",{onClick:function(){return t=e.teamId,void c("deny",t);var t},className:"deny-invitation-btn"},"Deny"))}))),a.emailConfirmed?r.a.createElement(x,{style:{marginTop:"25px"}},r.a.createElement(l.b,{to:"/teams/create"},"Create a team")):r.a.createElement(x,{style:{marginTop:"25px"}},r.a.createElement(l.b,{to:"/re-confirm"},"Confirm email")))):r.a.createElement("div",{className:"guest-section"},a.emailConfirmed&&r.a.createElement(x,{onClick:function(){},style:{marginTop:"20px"}},"Invite to the team")))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},r.a.createElement("h1",{className:"profile-name"},a.name),r.a.createElement("h2",{className:"profile-email"},r.a.createElement(R.a,{style:{marginRight:"20px"},icon:U.c}),a.email,!a.emailConfirmed&&r.a.createElement("span",{style:{color:"red",margin:"0 10px"}},"(not confirmed)"),r.a.createElement("span",{style:{marginLeft:"10px",color:"dark"===t?"#171d2d":"#b2b2b2"}},"#",a.uuid)),e.owner&&r.a.createElement("div",{className:"teams-container"},a.teams&&a.teams.length>0?r.a.createElement("div",null,r.a.createElement("ul",{className:"teams-list"},(a.teams,a.teams.map((function(e){return r.a.createElement("li",{style:{borderColor:y[t].foreground},key:e._id,className:"team-mini"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(e.imageSrc,")")},className:"img-wrap"},e.name.substr(0,2)),r.a.createElement(l.b,{style:{color:y[t].foreground},to:"/teams/thread/".concat(e._id)},e.name))}))))):r.a.createElement("h3",{style:{borderColor:y.common.primary,marginLeft:"15px"},className:"h3-no-teams"},r.a.createElement(M,{label:"robot"},"\ud83e\udd16")," You are not on any team yet")))))};var W=Object(s.b)((function(e){return{userId:e.auth.userId,confirmed:e.user.userData.isConfirmed,token:e.auth.token}}))((function(e,t){var a=e.match,c=e.userId,o=e.token,i=Object(n.useState)(),s=Object(b.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(!1),d=Object(b.a)(m,2),E=d[0],g=d[1];Object(n.useEffect)((function(){h()}),[a,c]);var h=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.baseUrl,"/users/get/by/id/").concat(a.params.userId),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,u(n),g(n._id===c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l?r.a.createElement($,{token:o,owner:E,user:l}):r.a.createElement("p",null,"loading...")}));a(124);var X=function(e){var t=Object(n.useState)(),a=Object(b.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),s=Object(b.a)(i,2),l=s[0],u=s[1],m=Object(n.useState)(),d=Object(b.a)(m,2),E=d[0],g=d[1],v=Object(n.useState)(""),j=Object(b.a)(v,2),y=j[0],O=j[1],x=Object(n.useState)(!1),k=Object(b.a)(x,2),w=k[0],I=k[1],S=Object(n.useRef)();Object(n.useEffect)((function(){O(e.defaultSrc||"")}),[e.defaultSrc]),Object(n.useEffect)((function(){u(-1!==e.options.indexOf("save")),g(-1!==e.options.indexOf("discard"))}),[e]);var N=Object(n.useContext)(h).theme,C=function(){var t=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("image",c),e.onFileSave(a),I(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(){S.current.click()},style:{backgroundImage:"url(".concat(y,")")},className:"profile-img profile-img-".concat(N)},r.a.createElement(R.a,{icon:U.a}),r.a.createElement("div",{className:"expanded-div"},r.a.createElement("span",null,"Change photo"),r.a.createElement("input",{onChange:function(t){var a=t.target.files[0],n=new Blob([a]),r=window.URL.createObjectURL(n);o(a),O(r),I(!0);var c=new FormData;c.append("image",a),e.onFileAttached&&e.onFileAttached(c)},ref:S,type:"file",className:"file-input",style:{display:"none"}}))),w&&r.a.createElement("div",{className:"photo-actions"},l&&r.a.createElement("span",{onClick:C,className:"save"},"Save"),E&&r.a.createElement("span",{onClick:function(){o({}),O(e.defaultSrc||""),I(!1)},className:"discard"},"Discard")))};a(125);var G=Object(s.b)((function(e){return{user:e.user.userData,jwt:e.auth.token}}))((function(e){var t=e.user,a=Object(n.useState)(""),c=Object(b.a)(a,2),o=c[0],i=c[1],s=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i;Object(n.useEffect)((function(){i(I.baseUrl+"/"+t.imageSrc)}),[e]);var l=function(a){var n,r,c;e.dispatch((n=t._id,r=a,c=e.jwt,function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.baseUrl,"/users/update/image/").concat(n),{method:"put",body:r,headers:{Authorization:"Bearer ".concat(c)}});case 2:t(B(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return t&&r.a.createElement("div",{className:"app-profile-settings"},r.a.createElement(g.d,{initialValues:{email:t.email,password:""},validate:function(e){var t={};return e.email?s.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password||(t.password="Password is required"),t}},(function(){return r.a.createElement(g.c,{className:"app-profile-settings-form "},r.a.createElement(X,{defaultSrc:o,options:["save","discard"],onFileSave:l}),r.a.createElement(w,null,r.a.createElement("label",null,"Your email"),r.a.createElement(g.b,{placeholder:"abc@gmail.com",type:"text",name:"email"}),r.a.createElement(g.a,{name:"email",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Your password"),r.a.createElement(g.b,{type:"password",name:"password"}),r.a.createElement(g.a,{name:"password",component:"span"})),e.children,r.a.createElement(x,{type:"submit"},"Save"))})))})),Q=a(53);a(126);var ee=function(e){var t=Object(n.useContext)(h).theme,a=Object(n.useState)([]),c=Object(b.a)(a,2),o=c[0],i=c[1],s=function(t){t.length<=e.max&&(i(t),e.onTopicsChange(t))};return r.a.createElement(r.a.Fragment,null,e.children,r.a.createElement("div",{className:"topics-input topics-input-".concat(t)},r.a.createElement("div",{className:"topics"},r.a.createElement("ul",{className:"topics-list"},o.map((function(e){return r.a.createElement("li",{style:{background:y.common.primary},key:10*Math.random(),className:"topic"},r.a.createElement("span",null,e),r.a.createElement(R.a,{onClick:function(){return function(e){s(o.filter((function(t){return t!=e})))}(e)},className:"icon",icon:U.l}))})))),r.a.createElement("input",{onBlur:function(e){var t=e.target.value;t.trim()&&(s([].concat(Object(Q.a)(o),[t])),e.target.value="")},onKeyDown:function(e){var t=e.target.value.trim();32===e.keyCode?(t&&s([].concat(Object(Q.a)(o),[t])),e.target.value=""):t||8!==e.keyCode||s(Object(Q.a)(o.splice(0,o.length-1)))},type:"text",className:"topics-input-field"})))};a(127);function te(){var e=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 700px;\n  margin-bottom: 50px;\n"]);return te=function(){return e},e}var ae=k.a.div(te());var ne=function(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),c=a[0],o=a[1],i=Object(n.useRef)(),s=function(e){i.current=e},l=function(e){o(e)};return r.a.createElement("div",{className:"app-create-team-form"},r.a.createElement(g.d,{initialValues:{name:"",description:"",technologies:""},validate:function(e){var t={};return e.name||(t.name="Team name is required"),t},onSubmit:function(t){e.onSubmit(Object(j.a)(Object(j.a)({},t),{},{technologies:c,imageFormData:i.current}))}},(function(){return r.a.createElement(g.c,{className:"app-form app-create-form"},r.a.createElement(X,{options:["discard"],onFileAttached:s}),r.a.createElement(_,{style:{fontSize:"4rem"}},r.a.createElement("span",null,"Collaborate with friends"),r.a.createElement(M,{label:"first-left"},"\ud83e\udd1c"),r.a.createElement(M,{label:"first-right"},"\ud83e\udd1b")),r.a.createElement(_,{style:{fontSize:"2rem",marginBottom:"60px"}},r.a.createElement("span",null,"Create your own team!")),r.a.createElement(ae,null,r.a.createElement(w,null,r.a.createElement("label",null,"Team name *"),r.a.createElement(g.b,{placeholder:"Amazingteam1337",type:"text",name:"name"}),r.a.createElement(g.a,{name:"name",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Team summary"),r.a.createElement(g.b,{placeholder:"Our amazing team is gonna do...",type:"text",name:"description"}),r.a.createElement(g.a,{name:"description",component:"span"})),r.a.createElement(ee,{max:"6",onTopicsChange:l},r.a.createElement("label",null,"Technologes (such as node.js, react etc.) max 6"))),r.a.createElement(x,{type:"submit"},"Create team"))})))};var re=Object(s.b)((function(e){return{jwt:e.auth.token}}))((function(e){var t=function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(I.baseUrl,"/teams/create"),{method:"post",headers:{Authorization:"Bearer ".concat(e.jwt),"Content-Type":"application/json"},body:JSON.stringify({name:a.name,description:a.description||"",technologies:a.technologies||[]})});case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,c=r._id,t.t0=a.imageFormData,!t.t0){t.next=11;break}return t.next=11,fetch("".concat(I.baseUrl,"/teams/upload/image/").concat(c),{headers:{Authorization:"Bearer ".concat(e.jwt)},method:"post",body:a.imageFormData});case 11:window.location.href="/#/teams/thread/"+c;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ne,{onSubmit:t})}));a(128);function ce(){var e=Object(E.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  & > .teammate-img {\n    width: 40px;\n    height: 40px;\n    background-size: cover;\n    background-position: center;\n    overflow: hidden;\n    border-radius: 50%;\n    margin-right: 10px;\n  }\n"]);return ce=function(){return e},e}function oe(){var e=Object(E.a)(["\n  background: ",";\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  border-radius: 20px;\n  color: #fff;\n  padding: 15px 20px;\n  margin: 10px 0;\n  position: relative;\n  max-width: 80%;\n  margin-left: 20px;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n\n    left: -13px;\n    top: 0;\n\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 20px 20px 0px 20px;\n    border-color: "," transparent transparent transparent;\n  }\n"]);return oe=function(){return e},e}function ie(){var e=Object(E.a)(["\n  background: #0a0d14;\n  border-radius: 20px;\n  color: #fff;\n  padding: 15px 20px;\n  margin: 10px 0;\n  position: relative;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n\n    right: -5px;\n    bottom: 0;\n\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 0 20px 20px 20px;\n    border-color: transparent transparent #0a0d14 transparent;\n  }\n"]);return ie=function(){return e},e}function se(){var e=Object(E.a)(["\n  text-alight: center;\n  margin: 0 auto;\n  padding: 5px 10px;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.03);\n"]);return se=function(){return e},e}var le=k.a.div(se()),ue=k.a.div(ie()),me=k.a.div(oe(),y.common.primary,y.common.primary),de=k.a.div(ce());var pe=function(e){var t=e.teamInfo,a=e.user,c=Object(n.useContext)(h).theme,o=Object(n.useState)(""),i=Object(b.a)(o,2),s=i[0],u=i[1],m=e.socket,d=Object(n.useRef)(),p=Object(n.useState)(t.conversation),f=Object(b.a)(p,2),E=f[0],g=f[1];return Object(n.useEffect)((function(){d.current.scrollTop=d.current.scrollHeight}),[]),Object(n.useEffect)((function(){m&&m.on("message recieved",(function(e){console.log("here msg recieved");var t=E;t.push(e),g([]),g(t),d.current&&(d.current.scrollTop=d.current.scrollHeight)}))}),[m]),r.a.createElement("div",{className:"team-page-main-section"},r.a.createElement("div",{className:"messages-container messages-container-".concat(c)},r.a.createElement("ul",{ref:d,className:"messages-list"},E.map((function(e){var n=function(e){return e.userId?e.userId===a._id?"your":"other":"info"}(e);if("info"===n)return r.a.createElement("li",{style:{alignSelf:"center"},key:e._id},r.a.createElement(le,null,e.message));if("your"===n)return r.a.createElement("li",{style:{alignSelf:"flex-end"},key:e._id},r.a.createElement(ue,null,e.message));var c=t.teammates.find((function(t){return t._id===e.userId}));return r.a.createElement("li",{style:{display:"flex",alignSelf:"flex-start"},key:e._id},r.a.createElement("div",{className:"user-msg-img",style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(c.imageSrc,")")}},!c.imageSrc&&c.name.substr(0,2)),r.a.createElement(me,null,r.a.createElement("span",{className:"user-msg-name"},c.name),r.a.createElement("span",{className:"user-msg-text"},e.message)))}))),r.a.createElement("div",{className:"messages-input messages-input-".concat(c)},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s.trim()&&(console.log("here msg send"),m.emit("message send",{message:s.trim(),userId:a._id,teamId:t._id}),u(""))}},r.a.createElement("input",{autoFocus:!0,type:"text",value:s,placeholder:"Type your message here...",onChange:function(e){u(e.target.value)}}),r.a.createElement("button",{className:"send-btn"},r.a.createElement(R.a,{style:{transform:"rotate(45deg) translateY(-2px)"},icon:U.g}))))),r.a.createElement("div",{className:"team-about-section"},r.a.createElement("h1",{className:"team-name"},t.name,r.a.createElement(l.b,{style:{color:y[c].foreground},to:"/teams/thread/".concat(t._id,"/settings"),className:"team-settings-btn"},r.a.createElement(R.a,{icon:U.b}))),r.a.createElement("ul",{className:"teammates"},t.teammates.map((function(n){return r.a.createElement("li",{style:{margin:"10px 0"},key:n._id},r.a.createElement(de,{className:"teammate"},r.a.createElement("div",{className:"teammate-img",style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(n.imageSrc,")")}},!n.imageSrc&&n.name.substr(0,2)),r.a.createElement(l.b,{style:{color:y[c].foreground},to:"/profile/".concat(n._id)},n.name),a._id!==n._id&&r.a.createElement("span",{onClick:function(){return a=n,void e.tryCall({whom:a,teamId:t._id});var a},className:"try-call-btn"},r.a.createElement(R.a,{icon:U.i})," Call")))})))))},fe=a(61),be=a.n(fe),Ee=function(e){return{type:"p2p/CALL_RECIEVED",payload:e}};var ge=Object(s.b)((function(e){return{socket:e.socket,auth:e.auth,user:e.user,p2p:e.p2p}}))((function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)(!1),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(!1),m=Object(b.a)(u,2),d=m[0],E=m[1],g=Object(n.useState)(!1),h=Object(b.a)(g,2),v=h[0],j=h[1],y=e.match.params.teamId,O=function(){var t=Object(f.a)(p.a.mark((function t(){var a,n,r,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s&&e.auth){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("".concat(I.baseUrl,"/teams/get/by/id/").concat(y));case 4:return a=t.sent,t.next=7,a.json();case 7:n=t.sent,l(n),r=n.teammates.map((function(e){return e.userId})),o=r.some((function(t){return t===e.user.userData._id})),c(o);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(e.auth.token&&s&&!v){var t=be()(I.baseUrl,{query:{token:e.auth.token,method:"connect",teamId:s._id}});E(t),j(!0),e.dispatch(function(e){return{type:"socket/INITIALIZE_SOCKET",payload:e}}(t))}}),[e.auth.token,s]),Object(n.useEffect)((function(){O()}),[e.user.userData._id,e.auth]),s&&r.a.createElement(pe,{tryCall:function(t){return function(t){e.dispatch({type:"p2pcall/TRY_CALL",payload:t})}(t)},user:e.user.userData,token:e.auth.token,teamInfo:s,socket:d})})),he=a(99),ve=a(193),je=a(190),ye=a(192);a(161);function Oe(e){var t=e.teammate;return r.a.createElement("div",{className:"editable-teammate"},t.name)}var xe=function(e){var t=e.team,a=Object(n.useContext)(h).theme,c=Object(n.useState)([]),o=Object(b.a)(c,2),i=o[0],s=o[1],u=Object(n.useRef)(),m=function(){var e=Object(f.a)(p.a.mark((function e(a){var n,r,c,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length<3)){e.next=3;break}return s([]),e.abrupt("return");case 3:return n=a.split(" ").join("+"),e.next=6,fetch("".concat(I.baseUrl,"/users/search/").concat(n));case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,o=c.filter((function(e){return!t.teammates.map((function(e){return e._id})).includes(e._id)&&e.emailConfirmed})),i=o.map((function(e){return t.invitations.map((function(e){return e.userId})).includes(e._id)?Object(j.a)(Object(j.a)({},e),{},{invited:!0}):Object(j.a)(Object(j.a)({},e),{},{invited:!1})})),s(i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var a=Object(f.a)(p.a.mark((function a(n,r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u.current.value="",a.next=3,fetch("".concat(I.baseUrl,"/teams/").concat(n,"/").concat(t._id,"/").concat(r),{headers:{Authorization:"Bearer ".concat(e.token)}});case 3:s([]),e.onTeamChanged();case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("invite",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("withdraw",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=Object(ye.a)(u.current,"input").pipe(Object(he.a)((function(e){return e.target.value})),Object(ve.a)(500),Object(je.a)()).subscribe((function(e){return m(e)}));return function(){return e.unsubscribe()}})),r.a.createElement("div",{className:"team-settings-container"},r.a.createElement("h1",{className:"team-name-header"},t.name),r.a.createElement("div",{className:"teammates-container"},r.a.createElement("ul",{className:"teammates-list"},t.teammates.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(Oe,{teammate:e}))})))),r.a.createElement("div",{className:"invite-teammate-container",style:{borderColor:y[a].foreground}},r.a.createElement("h2",{className:"secondary-settings-header"},"Already invited users"),r.a.createElement("ul",{className:"search-result-list"},t.invitations.map((function(e){return r.a.createElement("li",{className:"user-mini",key:e.userId},r.a.createElement("div",{className:"user-mini-img",style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(e.imageSrc,")")}}),r.a.createElement(l.b,{style:{marginRight:"15px"},target:"_blank",to:"/profile/".concat(e._id)},e.name),r.a.createElement("button",{onClick:function(){return g(e.userId)},className:"user-withdraw-btn"},"Withdraw"))})))),r.a.createElement("div",{className:"invite-teammate-container",style:{borderColor:y[a].foreground}},r.a.createElement("h2",{className:"secondary-settings-header"},"Invite participants"),r.a.createElement(w,null,r.a.createElement("label",null,"Global users search"),r.a.createElement("input",{ref:u,type:"text",placeholder:"type name or uid here..."})),r.a.createElement("ul",{className:"search-result-list"},i.map((function(e){return r.a.createElement("li",{className:"user-mini",key:e._id},r.a.createElement("div",{className:"user-mini-img",style:{backgroundImage:"url(".concat(I.baseUrl,"/").concat(e.imageSrc,")")}}),r.a.createElement(l.b,{target:"_blank",to:"/profile/".concat(e._id)},e.name),r.a.createElement("span",{className:"user-mini-uuid",style:{color:"dark"===a?"#43527B":"#b2b2b2"}},"#",e.uuid),e.invited?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{disabled:!0,onClick:function(){return E(e._id)},className:"disabled user-invite-btn"},"Pending"),r.a.createElement("button",{onClick:function(){return g(e._id)},className:"user-withdraw-btn"},"Withdraw")):r.a.createElement("button",{onClick:function(){return E(e._id)},className:"user-invite-btn"},"Invite"))})))))};var ke=Object(s.b)((function(e){return{token:e.auth.token}}))((function(e){var t=e.match.params.teamId,a=Object(n.useState)(!1),c=Object(b.a)(a,2),o=c[0],i=c[1],s=function(){var e=Object(f.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.baseUrl,"/teams/get/by/id/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,i(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),o&&r.a.createElement(xe,{onTeamChanged:s,token:e.token,team:o})}));a(162);var we=function(e){var t=e.match.params.teamId,a=Object(n.useState)(!1),c=Object(b.a)(a,2),o=c[0],i=c[1],s=function(){var e=Object(f.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I.baseUrl,"/teams/get/").concat(t,"/public"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,i(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s()}),[]),o?r.a.createElement("div",{className:"team-main-container"},r.a.createElement("div",{className:"team-img",style:{backgroundImage:"url(".concat(o.imageSrc,")")}}),r.a.createElement("h1",{className:"team-name"},o.name),r.a.createElement("h3",{className:"team-description"},o.description),r.a.createElement("h3",{className:"team-teammates"},r.a.createElement(R.a,{icon:U.n}),r.a.createElement("span",null,o.teammates))):r.a.createElement("p",null,"loading...")},Ie=a(67),Se=a.n(Ie),Ne=(a(186),{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]});var Ce=Object(s.b)((function(e){return{p2p:e.p2p,socket:e.socket.socket,user:e.user.userData}}))((function(e){var t,a,c,o=e.user,i=e.p2p,s=e.socket,l=Object(n.useRef)(),u=Object(n.useRef)(),m=Object(n.useRef)(),d=Object(n.useRef)(),E=Object(n.useRef)(),g=Object(n.useRef)(),h=Object(n.useState)(!1),v=Object(b.a)(h,2),j=(v[0],v[1]),y=Object(n.useState)(!1),O=Object(b.a)(y,2),x=O[0],k=O[1],w=Object(n.useState)(!1),I=Object(b.a)(w,2),S=I[0],N=I[1],C=Object(n.useState)(!0),_=Object(b.a)(C,2),A=_[0],T=_[1],D=Object(n.useState)(!0),F=Object(b.a)(D,2),L=F[0],z=F[1],B=Object(n.useState)(null),P=Object(b.a)(B,2),V=P[0],Z=P[1],Y=Object(n.useRef)(),q=!1,J=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:a=e.sent,z(t),m.current.srcObject=a,l.current=a;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){s&&o&&s.on("you have a call",(function(t){t.to.userId===o._id&&(Z(t.to.teamId),e.dispatch(Ee(t.from)),Y.current=t)}))}),[s,o]);var K=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current.muted=!0,u.current.src="",N(!1),e.next=5,J(t);case 5:k(!0),a=l.current,n=Y.current,g.current=new Se.a({initiator:!1,trickle:!1,stream:a,config:Ne}),g.current.on("signal",(function(e){s.emit("accept call",{signalFromPartner:e,from:{name:o.name,imageSrc:o.imageSrc,userId:o._id},to:{teamId:n.to.teamId,userId:n.from.userId}})})),g.current.on("stream",(function(e){d.current.srcObject=e})),g.current.on("close",(function(){})),q||(q=!0,g.current.signal(n.signalFromCaller)),s.on("call interrupted",(function(e){window.location.reload()}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,J(!1);case 3:t=new Se.a({initiator:!0,trickle:!1,stream:l.current,config:Ne}),E.current=t,t.on("signal",(function(e){q||(q=!0,s.emit("try call",{signalFromCaller:e,from:{name:o.name,imageSrc:o.imageSrc,userId:o._id},to:{teamId:i.subscriber.teamId,userId:i.subscriber.whom._id}}))})),t.on("stream",(function(e){d.current.srcObject=e})),s.on("call accepted",(function(e){t.signal(e.signalFromPartner)})),t.on("close",(function(){M()})),s.on("call interrupted",(function(e){window.location.reload()}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){k(e.p2p.tryCall),j(e.p2p.subscriber),e.p2p.tryCall&&H(e.p2p.subscriber)}),[e.p2p.tryCall]),Object(n.useEffect)((function(){i.callFrom&&(u.current.muted=!1,N(!0),u.current.src="https://dev-parties.herokuapp.com/audio/rington1.mp3",u.current.play())}),[i.callFrom]);var M=function(){s.emit("put call down",{to:{teamId:V}}),u.current.muted=!0,u.current.src="",N(!1),e.dispatch(Ee(null))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("audio",{muted:!0,ref:u,src:""}),r.a.createElement("div",{className:"incoming-call ".concat(S?"incoming-show":"incoming-hide")},r.a.createElement("div",{className:"incoming-user-img",style:{backgroundUrl:null===(t=i.callFrom)||void 0===t?void 0:t.imageSrc}},null===(a=i.callFrom)||void 0===a?void 0:a.name.substr(0,2)),r.a.createElement("div",{className:"incoming-user-name"},null===(c=i.callFrom)||void 0===c?void 0:c.name),r.a.createElement("div",{className:"incoming-call-buttons"},r.a.createElement("div",{onClick:function(){return K(!1)},style:{background:"#42AF2C"},className:"micro-switch-btn call-btn"},r.a.createElement(R.a,{icon:U.d})),r.a.createElement("div",{onClick:function(){return K(!0)},style:{background:"#42AF2C"},className:"video-switch-btn call-btn"},r.a.createElement(R.a,{icon:U.o})),r.a.createElement("div",{onClick:function(){return M()},style:{background:"#DF3A3A"},className:"end-call-btn call-btn"},r.a.createElement(R.a,{icon:U.h})))),r.a.createElement("div",{className:"call-container ".concat(x&&"show-mini")},r.a.createElement("video",{id:"localVideo",ref:m,autoPlay:!0,muted:!0}),r.a.createElement("video",{id:"partnerVideo",ref:d,autoPlay:!0}),r.a.createElement("div",{className:"call-buttons"},r.a.createElement("div",{style:{background:A?"#42AF2C":"#DF3A3A"},onClick:function(){l.current.getAudioTracks()[0].enabled=!l.current.getAudioTracks()[0].enabled,T(!A)},className:"micro-switch-btn call-btn"},r.a.createElement(R.a,{icon:A?U.d:U.e})),r.a.createElement("div",{style:{background:L?"#42AF2C":"#DF3A3A"},onClick:function(){l.current.getVideoTracks()[0].enabled=!l.current.getVideoTracks()[0].enabled,z(!L)},className:"video-switch-btn call-btn"},r.a.createElement(R.a,{icon:L?U.o:U.p})),r.a.createElement("div",{onClick:function(){return M()},style:{background:"#DF3A3A"},className:"end-call-btn call-btn"},r.a.createElement(R.a,{icon:U.h})))))}));var _e=Object(s.b)((function(e){return{email:e.user.userData.email,token:e.auth.token,userId:e.user.userData._id}}))((function(e){var t=e.email,a=e.token,c=e.userId,o=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(I.baseUrl,"/users/email/confirm"),{method:"post",body:JSON.stringify({redirectUrl:"".concat(window.location.origin,"/#/profile/").concat(c)}),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[c]),t?r.a.createElement("div",{style:{height:"90vh",display:"flex",textAlign:"center",justifyContent:"center",alignItems:"center"}},r.a.createElement("h1",{style:{fontSize:"4rem",margin:"40px"}},"Confirmation email has been sent to ",r.a.createElement("br",null),r.a.createElement(M,{label:"email"},"\ud83d\udc8c"),r.a.createElement("span",{style:{color:"deeppink"}},t),r.a.createElement(M,{label:"email"},"\ud83d\udc8c"))):r.a.createElement("p",null,"loading...")}));var Ae,Te,De,Fe=function(e){var t=e.component,a=e.signedIn,n=Object(i.a)(e,["component","signedIn"]);return r.a.createElement(u.b,Object.assign({},n,{component:t}),"false"==a&&r.a.createElement(u.a,{to:"/"}))},Re=Object(s.b)((function(e){return{signedIn:e.auth.signedIn}}))((function(e){var t=e.dispatch,a=e.signedIn;return Object(n.useEffect)((function(){t(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=localStorage.getItem("signedIn"))&&"false"!==a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("".concat(I.baseUrl,"/token/refresh"),{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});case 5:if(!(n=e.sent).ok){e.next=14;break}return e.next=9,n.json();case 9:r=e.sent,t(P(r)),t(B(r.userId)),e.next=14;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(l.a,null,r.a.createElement(v,null,r.a.createElement(Z,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/profile/:userId",component:W}),r.a.createElement(u.b,{path:"/confirm/",signedIn:a,component:Y}),r.a.createElement(Fe,{path:"/settings/",signedIn:a,component:G}),r.a.createElement(Fe,{path:"/teams/create",signedIn:a,component:re}),r.a.createElement(Fe,{path:"/teams/thread/:teamId",exact:!0,component:ge,signedIn:a}),r.a.createElement(Fe,{path:"/teams/thread/:teamId/settings",component:ke,signedIn:a}),r.a.createElement(Fe,{path:"/re-confirm/",signedIn:a,component:_e}),r.a.createElement(u.b,{path:"/",exact:!0,component:m}),r.a.createElement(u.b,{path:"/login",component:H}),r.a.createElement(u.b,{path:"/register",component:F}),r.a.createElement(u.b,{path:"/team/:teamId",component:we})),r.a.createElement(Ce,null)))})),Ue=a(33),Le=a(100),ze=a(101),Be=a(15),Pe=a(191),Ve=Object(Pe.a)((Ae={},Object(Be.a)(Ae,"auth/RECIEVE_TOKENS",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{token:t.payload.token,userId:t.payload.userId,errorText:"",signedIn:"true"})})),Object(Be.a)(Ae,"auth/SET_ERROR_TEXT",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{errorText:t.payload.errorText})})),Object(Be.a)(Ae,"auth/CLEAR_AUTH_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userId:"",token:"",signedIn:"false"})})),Ae),{userId:"",token:"",errorText:"",signedIn:localStorage.getItem("signedIn")||"false"}),Ze=Object(Pe.a)((Te={},Object(Be.a)(Te,"users/RECIEVE_USER_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userData:t.payload,errorText:""})})),Object(Be.a)(Te,"users/CLEAR_USER_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userData:""})})),Te),{userData:"",errorText:""}),Ye=Object(Pe.a)((De={},Object(Be.a)(De,"p2pcall/TRY_CALL",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{tryCall:!0,subscriber:t.payload})})),Object(Be.a)(De,"p2p/CALL_RECIEVED",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{callFrom:t.payload})})),Object(Be.a)(De,"p2p/CALL_INTERRUPTED",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{tryCall:!1,callFrom:null,subscriber:null})})),De),{tryCall:!1,subscriber:null,callFrom:null}),qe=Object(Pe.a)(Object(Be.a)({},"socket/INITIALIZE_SOCKET",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{socket:t.payload})})),{socket:null}),Je=Object(Ue.c)({auth:Ve,user:Ze,p2p:Ye,socket:qe}),Ke=Object(Le.createLogger)(),He=Object(Ue.d)(Je,Object(Ue.a)(ze.a,Ke));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:He},r.a.createElement(Re,null))),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.a1437344.chunk.js.map