(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){e.exports=a(191)},110:function(e,t,a){},114:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},123:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},161:function(e,t){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},180:function(e,t){},182:function(e,t){},190:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),o=a.n(c),l=(a(110),a(102)),i=a(11),s=a(10),u=a(12),m={dark:{body:"#0a0d14",foreground:"#eee"},light:{body:"#f5f5f5",foreground:"#131313"},common:{primary:"#673AB7"}};a(114);var d=function(){return r.a.createElement("div",{className:"app-home"},r.a.createElement("img",{className:"main-img",src:"./images/team.svg"}),r.a.createElement("h1",{className:"home-h1"},"Welcome to our DevParties service!"),r.a.createElement("h2",{className:"home-h2"},"Start collaboration with your team!"),r.a.createElement("div",{className:"steps"},r.a.createElement("div",{className:"step"},r.a.createElement("h2",null,"1."),r.a.createElement("img",{src:"./images/login.svg"}),r.a.createElement("h2",null,"Register your account")),r.a.createElement("div",{className:"dots"},r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"}),r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"}),r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"})),r.a.createElement("div",{className:"step"},r.a.createElement("h2",null,"2."),r.a.createElement("img",{src:"./images/create-team.svg"}),r.a.createElement("h2",null,"Create a team")),r.a.createElement("div",{className:"dots"},r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"}),r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"}),r.a.createElement("div",{style:{backgroundColor:m.common.primary},className:"dot"})),r.a.createElement("div",{className:"step"},r.a.createElement("h2",null,"3."),r.a.createElement("img",{src:"./images/collab.svg"}),r.a.createElement("h2",null,"Start collaboration"))))},p=a(1),f=a.n(p),b=a(3),E=a(2),h=a(19),g=a(4),v=(a(117),Object(n.createContext)("dark"));var y=function(e){var t=e.children,a=Object(n.useState)("dark"),c=Object(E.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("dev-parties-theme")||"dark";l(e)}),[]),Object(n.useEffect)((function(){localStorage.setItem("dev-parties-theme",o)}),[o]),r.a.createElement(v.Provider,{value:{theme:o,toggleTheme:function(){var e=localStorage.getItem("dev-parties-theme");l("light"===e?"dark":"light")}}},r.a.createElement("div",{className:"app-page app-page-".concat(o)},t))},j=a(6);a(118);function k(e){var t=Object(n.useContext)(v).theme,a={background:"dark"===t?"rgb(23 29 45)":m.common.primary,boxShadow:"2px 2px 3px ".concat("dark"===t?"#000":"#888")};return r.a.createElement("button",Object.assign({},e,{type:e.type,style:Object(j.a)(Object(j.a)({},a),e.style),className:"app-button"}),e.children)}k.defaultProps={type:"button"};var O=k,x=a(20);a(119);var w=function(e){var t=Object(n.useContext)(v).theme;return r.a.createElement("div",Object.assign({},e,{className:"form-field form-field-".concat(t)}),e.children)},N={baseUrl:"https://dev-parties.herokuapp.com"};a(120);function S(){var e=Object(h.a)(["\n  position: absolute;\n  right: 10px;\n  top: 43px;\n  width: 20px;\n  height: 20px;\n  border: 3px solid ",";\n  border-color: "," "," "," transparent;\n  border-radius: 50%;\n  animation: "," 1s infinite linear;\n"]);return S=function(){return e},e}function I(){var e=Object(h.a)(["\n  0% { transform: rotate(0deg) }\n  100% { transform: rotate(360deg) }\n"]);return I=function(){return e},e}function C(){var e=Object(h.a)(["\n  font-size: 2rem;\n  margin-bottom: 20px;\n"]);return C=function(){return e},e}var _=x.a.h2(C()),A=Object(x.b)(I()),T=x.a.div(S(),m.common.primary,m.common.primary,m.common.primary,m.common.primary,A);var F=function(e){var t=Object(n.useContext)(v).theme,a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,c=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,30}$/,o=Object(n.useState)(""),l=Object(E.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(E.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),y=Object(E.a)(h,2),j=y[0],k=y[1],x=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(t),k(!0),r=t.target.value,e.prev=3,!r||!a.test(r)){e.next=14;break}return p(!0),e.next=8,fetch("".concat(N.baseUrl,"/email-check/").concat(r));case 8:return c=e.sent,e.next=11,c.text();case 11:o=e.sent,200!==c.status?s(o):s(""),p(!1);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(3);case 18:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"app-register",style:{}},r.a.createElement(g.d,{initialValues:{email:"",fullname:"",password:"",repeat_password:""},validate:function(e){var t={};return e.email?a.test(e.email)||(t.email="Invalid email address",s("")):(t.email="Email is required",s("")),e.fullname||(t.fullname="Fullname is required"),e.password?c.test(e.password)||(t.password="Password must contains from 8 to 30 characters and \nmin 1 uppercase letter\nmin 1 lowercase letter\nmin 1 number\n"):t.password="Password is required",e.password!==e.repeat_password&&(t.repeat_password="Passwords are not same"),t},onSubmit:function(){var t=Object(b.a)(f.a.mark((function t(a,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.setSubmitting,e.onSubmit(a);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){e.isSubmitting;var a=e.handleBlur,n=e.errors;return r.a.createElement(g.c,{className:"app-form app-form-".concat(t)},r.a.createElement(_,null,r.a.createElement("span",{"aria-label":"party-face-emoji",role:"img"},"\ud83e\udd73"),"Join us!",r.a.createElement("span",{"aria-label":"party-face-emoji",role:"img"},"\ud83e\udd73")),r.a.createElement(w,null,r.a.createElement("label",null,"Your fullname"),r.a.createElement(g.b,{autoFocus:!0,placeholder:"David Bowie",type:"text",name:"fullname"}),r.a.createElement(g.a,{name:"fullname",component:"span"})),r.a.createElement(w,null,d&&r.a.createElement(T,null),r.a.createElement("label",null,"Email (we will send you a confrimation link)"),r.a.createElement(g.b,{onBlur:function(e){return x(e,a)},placeholder:"abc@gmail.com",type:"text",name:"email"}),r.a.createElement("span",null,function(e,t){if(j)return e||t}(i,n.email))),r.a.createElement(w,null,r.a.createElement("label",null,"Password"),r.a.createElement(g.b,{type:"password",name:"password",placeholder:"Do not forget it :)"}),r.a.createElement(g.a,{name:"password",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Repeat password"),r.a.createElement(g.b,{type:"password",name:"repeat_password",placeholder:""}),r.a.createElement(g.a,{name:"repeat_password",component:"span"})),r.a.createElement(O,{type:"submit"},"Sign up!"))})))};var R=function(e){var t=e.history,a=function(){var e=Object(b.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(N.baseUrl+"/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,name:a.fullname,password:a.password,redirectUrl:"".concat(window.location.origin,"/#/login")})});case 2:e.sent.ok&&t.push({pathname:"/confirm",email:a.email});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(F,{onSubmit:a})},U=a(8),D=a(7);var L=function(e){var t={background:m.common.primary,boxShadow:"none",border:"none",outline:"none",color:m.dark.foreground,cursor:"pointer",fontSize:"1.2rem"};return r.a.createElement("button",Object.assign({style:t},e))},z=function(e){return{type:"users/RECIEVE_USER_DATA",payload:e}},B=function(e){return function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(N.baseUrl,"/users/get/by/id/").concat(e),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,a(z(r));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){var t=e.token,a=e.userId;return localStorage.setItem("signedIn","true"),{type:"auth/RECIEVE_TOKENS",payload:{token:t,userId:a}}},V=function(e,t){return function(){var a=Object(b.a)(f.a.mark((function a(n){var r,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(N.baseUrl,"/auth/login"),{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})});case 2:if(!(r=a.sent).ok){a.next=13;break}return localStorage.setItem("signedIn","true"),a.next=7,r.json();case 7:c=a.sent,n(P(c)),n(B(c.userId)),window.location.href="/#/",a.next=15;break;case 13:localStorage.setItem("signedIn","false"),n({type:"auth/SET_ERROR_TEXT",payload:{errorText:"Incorrect email or password"}});case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};a(123);var Z=Object(i.b)((function(e){return{name:e.user.userData.name,id:e.user.userData._id}}))((function(e){var t=Object(n.useContext)(v),a=t.theme,c=t.toggleTheme,o=Object(n.useState)("closed"),l=Object(E.a)(o,2),i=l[0],d=l[1],p=Object(n.useState)(""),h=Object(E.a)(p,2),g=h[0],y=h[1],j=Object(n.useState)({name:"",id:""}),k=Object(E.a)(j,2),O=k[0],x=k[1];return Object(n.useEffect)((function(){x({name:e.name,id:e.id})}),[e]),r.a.createElement("header",{style:{backgroundColor:m.common.primary},className:"app-header app-header-".concat(a)},g&&r.a.createElement(u.a,{to:g}),r.a.createElement("div",{className:"header-left-side"},r.a.createElement("h1",{style:{cursor:"pointer"},onClick:function(){y("/")}},"DevParties")),r.a.createElement("div",{className:"header-right-side"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/search"},r.a.createElement(U.a,{icon:D.j})," ",r.a.createElement("span",{style:{margin:"0 10px"}},"Global search"))),!e.name&&r.a.createElement("div",{className:"header-unauth-links"},r.a.createElement("span",null,r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement("span",null,r.a.createElement(s.b,{to:"/register"},"Sign Up"))),r.a.createElement(L,{onClick:c},"light"===a?r.a.createElement(U.a,{icon:D.f}):r.a.createElement(U.a,{icon:D.l})),e.name&&r.a.createElement("div",{onClick:function(){d("open"===i?"closed":"open")},className:"profile-header-settings"},r.a.createElement("a",{style:{color:"#fff"}},O.name),r.a.createElement("ul",{className:"profile-menu ".concat(i),style:{boxShadow:"0 5px 10px ".concat("dark"===a?"#000":"#ccc")}},r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(s.b,{style:{color:m[a].foreground,backgroundColor:m[a].body},to:"/profile/".concat(O.id)},r.a.createElement(U.a,{icon:D.n}),"My Account")),r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(s.b,{style:{color:m[a].foreground,backgroundColor:m[a].body},to:"/settings"},r.a.createElement(U.a,{icon:D.b}),"Settings")),r.a.createElement("li",{className:"profile-menu-item"},r.a.createElement(s.b,{to:"/",style:{color:m[a].foreground,backgroundColor:m[a].body},onClick:function(){e.dispatch(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/auth/logout"),{credentials:"include"});case 2:localStorage.setItem("signedIn","false"),t({type:"auth/CLEAR_AUTH_DATA"}),t({type:"users/CLEAR_USER_DATA"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(U.a,{icon:D.k}),"Sign out"))))))}));var q=function(e){var t=e.location;return t.state,t.email?r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"7rem",margin:"40px"}},"Thank you for registration!",r.a.createElement("span",{"aria-label":"party-emoji",role:"img"},"\ud83c\udf89")),r.a.createElement("h2",{style:{fontSize:"3rem",margin:"40px"}},"Confirmation link has been sent to ",r.a.createElement("span",{style:{textDecoration:"underline"}},t.email))):r.a.createElement(u.a,{path:"home"})};a(125);var J=function(e){var t=Object(n.useContext)(v).theme,a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i;return r.a.createElement("div",{className:"app-login"},r.a.createElement(g.d,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?a.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password||(t.password="Password is required"),t},onSubmit:function(t){return e.onSubmit(t)}},(function(){return r.a.createElement(g.c,{className:"app-form app-form-".concat(t)},r.a.createElement(_,null,"Login to your account!",r.a.createElement("span",{"aria-label":"sipped-face-emoji",role:"img"},"\ud83e\udd10")),r.a.createElement(w,null,r.a.createElement("label",null,"Your email"),r.a.createElement(g.b,{autoFocus:!0,placeholder:"abc@gmail.com",type:"text",name:"email"}),r.a.createElement(g.a,{name:"email",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Your password"),r.a.createElement(g.b,{type:"password",name:"password"}),r.a.createElement(g.a,{name:"password",component:"span"})),e.children,r.a.createElement(O,{type:"submit"},"Login"))})))};function Y(){var e=Object(h.a)(["\n  color: rgb(204, 30, 30);\n  font-weight: bold;\n  font-size: 1.2rem;\n  margin-bottom: 20px;\n"]);return Y=function(){return e},e}var G=x.a.div(Y());var K=Object(i.b)((function(e){return{auth:e.auth,errorText:e.auth.errorText,userId:e.auth.userId}}))((function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2);a[0],a[1],Object(n.useEffect)((function(){}),[e]);var c=e.errorText,o=function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.email,r=a.password,e.dispatch(V(n,r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{onSubmit:o},c&&r.a.createElement(G,null,c)))}));a(126);var H=function(e){var t=e.children,a=e.label;return r.a.createElement("span",{"aria-label":"".concat(a,"-emoji"),role:"img"},t)};var M=function(e){var t=Object(n.useContext)(v).theme,a=e.user,c=function(){var t=Object(b.a)(f.a.mark((function t(a,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(N.baseUrl,"/users/invitations/").concat(a,"/").concat(n),{headers:{Authorization:"Bearer: ".concat(e.token)}});case 2:window.location.reload();case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"app-profile-view"},r.a.createElement("div",{className:"flex-row"},r.a.createElement("div",{className:"left-section"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(a.imageSrc,")")},className:"".concat(!a.imageSrc&&"no-photo"," profile-img profile-img-").concat(t)},!a.imageSrc&&a.name.substr(0,2)),r.a.createElement("div",null,e.owner?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.invitations.length>0&&r.a.createElement("h2",{className:"invitations-h2"},"Your invitations:"),r.a.createElement("ul",null,a.invitations.map((function(e){return r.a.createElement("li",{key:e.teamId},r.a.createElement(s.b,{to:"/team/".concat(e.teamId),style:{color:m[t].foreground,textDecoration:"underline"}},e.name),r.a.createElement("button",{onClick:function(){return t=e.teamId,void c("accept",t);var t},className:"accept-invitation-btn"},"Accept"),r.a.createElement("button",{onClick:function(){return t=e.teamId,void c("deny",t);var t},className:"deny-invitation-btn"},"Deny"))}))),a.emailConfirmed?r.a.createElement(O,{style:{marginTop:"25px"}},r.a.createElement(s.b,{to:"/teams/create"},"Create a team")):r.a.createElement(O,{style:{marginTop:"25px"}},r.a.createElement(s.b,{to:"/re-confirm"},"Confirm email")))):r.a.createElement("div",{className:"guest-section"},a.emailConfirmed&&r.a.createElement(r.a.Fragment,null)))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},r.a.createElement("h1",{className:"profile-name"},a.name,r.a.createElement("span",{style:{fontSize:"3rem",marginLeft:"10px",color:"dark"===t?"#171d2d":"#b2b2b2"}},"#",a.uuid)),a.bio&&r.a.createElement("h2",{className:"profile-bio"},'"',a.bio,'"'),r.a.createElement("h2",{className:"profile-email"},r.a.createElement(U.a,{style:{marginRight:"20px"},icon:D.c}),a.email,!a.emailConfirmed&&r.a.createElement("span",{style:{color:"red",margin:"0 10px"}},"(not confirmed)")),r.a.createElement("div",{className:"profile-links"},r.a.createElement("ul",{className:"profile-links-list"},a.github&&r.a.createElement("li",{className:"profile-link"},r.a.createElement("a",{style:{color:m[t].foreground},target:"_blank",href:a.github},r.a.createElement("i",{className:"fab fa-github"})," Github")),a.linkedin&&r.a.createElement("li",{className:"profile-link"},r.a.createElement("a",{style:{color:m[t].foreground},target:"_blank",href:a.linkedin},r.a.createElement("i",{className:"fab fa-linkedin"})," Linkedin")),a.facebook&&r.a.createElement("li",{className:"profile-link"},r.a.createElement("a",{style:{color:m[t].foreground},target:"_blank",href:a.facebook},r.a.createElement("i",{className:"fab fa-facebook"})," Facebook")))),e.owner&&r.a.createElement("div",{className:"teams-container"},a.teams&&a.teams.length>0?r.a.createElement("div",null,r.a.createElement("ul",{className:"teams-list"},(a.teams,a.teams.map((function(e){return r.a.createElement("li",{style:{borderColor:m[t].foreground},key:e._id,className:"team-mini"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(e.imageSrc,")")},className:"img-wrap"},e.name.substr(0,2)),r.a.createElement(s.b,{style:{color:m[t].foreground},to:"/teams/thread/".concat(e._id)},e.name))}))))):r.a.createElement("h3",{style:{borderColor:m.common.primary,marginLeft:"15px"},className:"h3-no-teams"},r.a.createElement(H,{label:"robot"},"\ud83e\udd16")," You are not on any team yet")))))};var W=Object(i.b)((function(e){return{userId:e.auth.userId,confirmed:e.user.userData.isConfirmed,token:e.auth.token}}))((function(e,t){var a=e.match,c=e.userId,o=e.token,l=Object(n.useState)(),i=Object(E.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(E.a)(m,2),p=d[0],h=d[1];Object(n.useEffect)((function(){g()}),[a,c]);var g=function(){var e=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/users/get/by/id/").concat(a.params.userId),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,u(n),h(n._id===c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s?r.a.createElement(M,{token:o,owner:p,user:s}):r.a.createElement("p",null,"loading...")}));a(127);var X=function(e){var t=Object(n.useState)(),a=Object(E.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(),i=Object(E.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(),d=Object(E.a)(m,2),p=d[0],h=d[1],g=Object(n.useState)(""),y=Object(E.a)(g,2),j=y[0],k=y[1],O=Object(n.useState)(!1),x=Object(E.a)(O,2),w=x[0],N=x[1],S=Object(n.useRef)();Object(n.useEffect)((function(){k(e.defaultSrc||"")}),[e.defaultSrc]),Object(n.useEffect)((function(){u(-1!==e.options.indexOf("save")),h(-1!==e.options.indexOf("discard"))}),[e]);var I=Object(n.useContext)(v).theme,C=function(){var t=Object(b.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("image",c),e.onFileSave(a),N(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(){S.current.click()},style:{backgroundImage:"url(".concat(j,")")},className:"profile-img profile-img-".concat(I)},r.a.createElement(U.a,{icon:D.a}),r.a.createElement("div",{className:"expanded-div"},r.a.createElement("span",null,"Change photo"),r.a.createElement("input",{onChange:function(t){var a=t.target.files[0],n=new Blob([a]),r=window.URL.createObjectURL(n);o(a),k(r),N(!0);var c=new FormData;c.append("image",a),e.onFileAttached&&e.onFileAttached(c)},ref:S,type:"file",className:"file-input",style:{display:"none"}}))),w&&r.a.createElement("div",{className:"photo-actions"},s&&r.a.createElement("span",{onClick:C,className:"save"},"Save"),p&&r.a.createElement("span",{onClick:function(){o({}),k(e.defaultSrc||""),N(!1)},className:"discard"},"Discard")))};a(128);var $=Object(i.b)((function(e){return{user:e.user.userData,jwt:e.auth.token}}))((function(e){var t=e.user,a=Object(n.useState)(""),c=Object(E.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){l(N.baseUrl+"/"+t.imageSrc)}),[e]);var i=function(a){var n,r,c;e.dispatch((n=t._id,r=a,c=e.jwt,function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/users/update/image/").concat(n),{method:"put",body:r,headers:{Authorization:"Bearer ".concat(c)}});case 2:t(B(n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},s=function(){var a=Object(b.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("".concat(N.baseUrl,"/users/update/properties/").concat(t._id),{method:"put",headers:{Authorization:"Bearer ".concat(e.jwt),"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:e.dispatch(B(t._id));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return t&&r.a.createElement("div",{className:"app-profile-settings"},r.a.createElement(g.d,{initialValues:{name:t.name||"",bio:t.bio||"",github:t.github||"",linkedin:t.linkedin||"",facebook:t.facebook||""},validate:function(e){var t={};return e.github&&!/^https?:\/\/w?w?w?\.?github\.com/.test(e.github)&&(t.github="Github link is not correct"),e.linkedin&&!/^https?:\/\/w?w?w?\.?linkedin\.com/.test(e.linkedin)&&(t.linkedin="Linkedin link is not correct"),e.facebook&&!/^https?:\/\/w?w?w?\.?facebook\.com/.test(e.facebook)&&(t.facebook="Facebook link is not correct"),e.name||(t.name="Name is required"),t},onSubmit:function(e){return s(e)}},(function(a){var n=a.handleSubmit;return r.a.createElement(g.c,{onSubmit:n,className:"app-profile-settings-form "},r.a.createElement(X,{defaultSrc:o,options:["save","discard"],onFileSave:i}),r.a.createElement(w,null,r.a.createElement("label",{style:{marginTop:"20px"}},"Fullname"),r.a.createElement(g.b,{type:"text",name:"name",placeholder:"current name is ".concat(t.name)}),r.a.createElement(g.a,{name:"name",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Tell others about yourself. Feel free..."),r.a.createElement(g.b,{type:"text",name:"bio",placeholder:"I am a web develop..."})),r.a.createElement(w,null,r.a.createElement("label",null,"Github profile:"),r.a.createElement(g.b,{type:"text",name:"github",placeholder:"https://github.com/<your_username>"}),r.a.createElement(g.a,{name:"github",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Linkedin:"),r.a.createElement(g.b,{type:"text",name:"linkedin",placeholder:"https://linkedin.com/in//<your_username>"}),r.a.createElement(g.a,{name:"linkedin",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Facebook:"),r.a.createElement(g.b,{type:"text",name:"facebook",placeholder:"https://facebook.com/profile..."}),r.a.createElement(g.a,{name:"facebook",component:"span"})),e.children,r.a.createElement(O,{type:"submit"},"Save"))})))})),Q=a(53);a(129);var ee=function(e){var t=Object(n.useContext)(v).theme,a=Object(n.useState)([]),c=Object(E.a)(a,2),o=c[0],l=c[1],i=function(t){t.length<=e.max&&(l(t),e.onTopicsChange(t))};return r.a.createElement(r.a.Fragment,null,e.children,r.a.createElement("div",{className:"topics-input topics-input-".concat(t)},r.a.createElement("div",{className:"topics"},r.a.createElement("ul",{className:"topics-list"},o.map((function(e){return r.a.createElement("li",{style:{background:m.common.primary},key:10*Math.random(),className:"topic"},r.a.createElement("span",null,e),r.a.createElement(U.a,{onClick:function(){return function(e){i(o.filter((function(t){return t!=e})))}(e)},className:"icon",icon:D.m}))})))),r.a.createElement("input",{onBlur:function(e){var t=e.target.value;t.trim()&&(i([].concat(Object(Q.a)(o),[t])),e.target.value="")},onKeyDown:function(e){var t=e.target.value.trim();32===e.keyCode?(t&&i([].concat(Object(Q.a)(o),[t])),e.target.value=""):t||8!==e.keyCode||i(Object(Q.a)(o.splice(0,o.length-1)))},type:"text",className:"topics-input-field"})))};a(130);function te(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 700px;\n  margin-bottom: 50px;\n"]);return te=function(){return e},e}var ae=x.a.div(te());var ne=function(e){var t=Object(n.useState)([]),a=Object(E.a)(t,2),c=a[0],o=a[1],l=Object(n.useRef)(),i=function(e){l.current=e},s=function(e){o(e)};return r.a.createElement("div",{className:"app-create-team-form"},r.a.createElement(g.d,{initialValues:{name:"",description:"",technologies:""},validate:function(e){var t={};return e.name||(t.name="Team name is required"),t},onSubmit:function(t){e.onSubmit(Object(j.a)(Object(j.a)({},t),{},{technologies:c,imageFormData:l.current}))}},(function(){return r.a.createElement(g.c,{className:"app-form app-create-form"},r.a.createElement(X,{options:["discard"],onFileAttached:i}),r.a.createElement(_,{style:{fontSize:"4rem"}},r.a.createElement("span",null,"Collaborate with friends"),r.a.createElement(H,{label:"first-left"},"\ud83e\udd1c"),r.a.createElement(H,{label:"first-right"},"\ud83e\udd1b")),r.a.createElement(_,{style:{fontSize:"2rem",marginBottom:"60px"}},r.a.createElement("span",null,"Create your own team!")),r.a.createElement(ae,null,r.a.createElement(w,null,r.a.createElement("label",null,"Team name *"),r.a.createElement(g.b,{placeholder:"Amazingteam1337",type:"text",name:"name"}),r.a.createElement(g.a,{name:"name",component:"span"})),r.a.createElement(w,null,r.a.createElement("label",null,"Team summary"),r.a.createElement(g.b,{placeholder:"Our amazing team is gonna do...",type:"text",name:"description"}),r.a.createElement(g.a,{name:"description",component:"span"})),r.a.createElement(ee,{max:"6",onTopicsChange:s},r.a.createElement("label",null,"Technologes (such as node.js, react etc.) max 6"))),r.a.createElement(O,{type:"submit"},"Create team"))})))};var re=Object(i.b)((function(e){return{jwt:e.auth.token}}))((function(e){var t=function(){var t=Object(b.a)(f.a.mark((function t(a){var n,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(N.baseUrl,"/teams/create"),{method:"post",headers:{Authorization:"Bearer ".concat(e.jwt),"Content-Type":"application/json"},body:JSON.stringify({name:a.name,description:a.description||"",technologies:a.technologies||[]})});case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,c=r._id,t.t0=a.imageFormData,!t.t0){t.next=11;break}return t.next=11,fetch("".concat(N.baseUrl,"/teams/upload/image/").concat(c),{headers:{Authorization:"Bearer ".concat(e.jwt)},method:"post",body:a.imageFormData});case 11:window.location.href="/#/teams/thread/"+c;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ne,{onSubmit:t})}));a(131);function ce(){var e=Object(h.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  & > .teammate-img {\n    width: 40px;\n    height: 40px;\n    background-size: cover;\n    background-position: center;\n    overflow: hidden;\n    border-radius: 50%;\n    margin-right: 10px;\n  }\n"]);return ce=function(){return e},e}function oe(){var e=Object(h.a)(["\n  background: ",";\n  color: #fff;\n  display: flex;\n  flex-direction: column;\n  border-radius: 20px;\n  color: #fff;\n  padding: 15px 20px;\n  margin: 10px 0;\n  position: relative;\n  max-width: 80%;\n  margin-left: 20px;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n\n    left: -13px;\n    top: 0;\n\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 20px 20px 0px 20px;\n    border-color: "," transparent transparent transparent;\n  }\n"]);return oe=function(){return e},e}function le(){var e=Object(h.a)(["\n  background: #0a0d14;\n  border-radius: 20px;\n  color: #fff;\n  padding: 15px 20px;\n  margin: 10px 0;\n  position: relative;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n\n    right: -5px;\n    bottom: 0;\n\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 0 20px 20px 20px;\n    border-color: transparent transparent #0a0d14 transparent;\n  }\n"]);return le=function(){return e},e}function ie(){var e=Object(h.a)(["\n  text-alight: center;\n  margin: 0 auto;\n  padding: 5px 10px;\n  border-radius: 10px;\n  background: rgba(255, 255, 255, 0.03);\n"]);return ie=function(){return e},e}var se=x.a.div(ie()),ue=x.a.div(le()),me=x.a.div(oe(),m.common.primary,m.common.primary),de=x.a.div(ce());var pe=function(e){var t=e.teamInfo,a=e.user,c=Object(n.useContext)(v).theme,o=Object(n.useState)(""),l=Object(E.a)(o,2),i=l[0],u=l[1],d=e.socket,p=Object(n.useRef)(),f=Object(n.useState)(t.conversation),b=Object(E.a)(f,2),h=b[0],g=b[1];return Object(n.useEffect)((function(){p.current.scrollTop=p.current.scrollHeight}),[]),Object(n.useEffect)((function(){d&&d.on("message recieved",(function(e){console.log("here msg recieved");var t=h;t.push(e),g([]),g(t),p.current&&(p.current.scrollTop=p.current.scrollHeight)}))}),[d]),r.a.createElement("div",{className:"team-page-main-section"},r.a.createElement("div",{className:"messages-container messages-container-".concat(c)},r.a.createElement("ul",{ref:p,className:"messages-list"},h.map((function(e){var n=function(e){return e.userId?e.userId===a._id?"your":"other":"info"}(e);if("info"===n)return r.a.createElement("li",{style:{alignSelf:"center"},key:e._id},r.a.createElement(se,null,e.message));if("your"===n)return r.a.createElement("li",{style:{alignSelf:"flex-end"},key:e._id},r.a.createElement(ue,null,e.message));var c=t.teammates.find((function(t){return t._id===e.userId}));return r.a.createElement("li",{style:{display:"flex",alignSelf:"flex-start"},key:e._id},r.a.createElement("div",{className:"user-msg-img",style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(null===c||void 0===c?void 0:c.imageSrc,")")}},!(null===c||void 0===c?void 0:c.imageSrc)&&((null===c||void 0===c?void 0:c.name.substr(0,2))||r.a.createElement("span",null,"X"))),r.a.createElement(me,null,r.a.createElement("span",{className:"user-msg-name"},(null===c||void 0===c?void 0:c.name)||"Not a teammate anymore"),r.a.createElement("span",{className:"user-msg-text"},e.message)))}))),r.a.createElement("div",{className:"messages-input messages-input-".concat(c)},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i.trim()&&(console.log("here msg send"),d.emit("message send",{message:i.trim(),userId:a._id,teamId:t._id}),u(""))}},r.a.createElement("input",{autoFocus:!0,type:"text",value:i,placeholder:"Type your message here...",onChange:function(e){u(e.target.value)}}),r.a.createElement("button",{className:"send-btn"},r.a.createElement(U.a,{style:{transform:"rotate(45deg) translateY(-2px)"},icon:D.g}))))),r.a.createElement("div",{className:"team-about-section"},r.a.createElement("h1",{className:"team-name"},t.name,t.ownerId===a._id&&r.a.createElement(s.b,{style:{color:m[c].foreground},to:"/teams/thread/".concat(t._id,"/settings"),className:"team-settings-btn"},r.a.createElement(U.a,{icon:D.b}))),r.a.createElement("ul",{className:"teammates"},t.teammates.map((function(n){return r.a.createElement("li",{style:{margin:"10px 0"},key:n._id},r.a.createElement(de,{className:"teammate"},r.a.createElement("div",{className:"teammate-img",style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(n.imageSrc,")")}},!n.imageSrc&&n.name.substr(0,2)),r.a.createElement(s.b,{style:{color:m[c].foreground},to:"/profile/".concat(n._id)},n.name),a._id!==n._id&&r.a.createElement("span",{onClick:function(){return a=n,void e.tryCall({whom:a,teamId:t._id});var a},className:"try-call-btn"},r.a.createElement(U.a,{icon:D.i})," Call")))})))))},fe=a(61),be=a.n(fe),Ee=function(e){return{type:"p2p/CALL_RECIEVED",payload:e}};var he=Object(i.b)((function(e){return{socket:e.socket,auth:e.auth,user:e.user,p2p:e.p2p}}))((function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)(!1),l=Object(E.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(E.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),g=Object(E.a)(h,2),v=g[0],y=g[1],j=e.match.params.teamId,k=function(){var t=Object(b.a)(f.a.mark((function t(){var a,n,r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i&&e.auth){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("".concat(N.baseUrl,"/teams/get/by/id/").concat(j));case 4:return a=t.sent,t.next=7,a.json();case 7:n=t.sent,s(n),r=n.teammates.map((function(e){return e.userId})),o=r.some((function(t){return t===e.user.userData._id})),c(o);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(e.auth.token&&i&&!v){var t=be()(N.baseUrl,{query:{token:e.auth.token,method:"connect",teamId:i._id}});p(t),y(!0),e.dispatch(function(e){return{type:"socket/INITIALIZE_SOCKET",payload:e}}(t))}}),[e.auth.token,i]),Object(n.useEffect)((function(){k()}),[e.user.userData._id,e.auth]),i&&r.a.createElement(pe,{tryCall:function(t){return function(t){e.dispatch({type:"p2pcall/TRY_CALL",payload:t})}(t)},user:e.user.userData,token:e.auth.token,teamInfo:i,socket:d})})),ge=a(99),ve=a(195),ye=a(192),je=a(194);a(164);function ke(e){var t=e.teammate,a=e.user,c=e.onReject,o=Object(n.useContext)(v).theme;return console.log(t),r.a.createElement("div",{className:"user-mini",key:t._id},r.a.createElement("div",{className:"user-mini-img",style:{borderColor:m[o].foreground,backgroundImage:"url(".concat(N.baseUrl,"/").concat(t.imageSrc,")")}},!t.imageSrc&&r.a.createElement("span",null,t.name.substr(0,2))),r.a.createElement(s.b,{style:{color:m[o].foreground,marginRight:"5px"},target:"_blank",to:"/profile/".concat(t._id)},t.name),r.a.createElement("ul",{className:"roles-list"},t.roles.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("div",{style:{backgroundColor:"owner"===e.toLowerCase()&&"red"},className:"role"},e,r.a.createElement("span",{style:{marginLeft:"10px"}},r.a.createElement(U.a,{className:"icon",icon:D.m}))))}))),t._id!==a._id&&r.a.createElement("span",{onClick:function(){return c(t._id)},style:{backgroundColor:"red"},className:"role-handler-btn"},"Reject Participant"),r.a.createElement("span",{style:{backgroundColor:m.common.primary},className:"role-handler-btn"},"+ Add role"))}var Oe=function(e){var t=e.team,a=Object(n.useContext)(v).theme,c=Object(n.useState)([]),o=Object(E.a)(c,2),l=o[0],i=o[1],u=Object(n.useRef)(),d=function(){var e=Object(b.a)(f.a.mark((function e(a){var n,r,c,o,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length<3)){e.next=3;break}return i([]),e.abrupt("return");case 3:return n=a.split(" ").join("+"),e.next=6,fetch("".concat(N.baseUrl,"/users/search/by/name/").concat(n));case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,o=c.filter((function(e){return!t.teammates.map((function(e){return e._id})).includes(e._id)&&e.emailConfirmed})),l=o.map((function(e){return t.invitations.map((function(e){return e.userId})).includes(e._id)?Object(j.a)(Object(j.a)({},e),{},{invited:!0}):Object(j.a)(Object(j.a)({},e),{},{invited:!1})})),i(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var a=Object(b.a)(f.a.mark((function a(n,r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u.current.value="",a.next=3,fetch("".concat(N.baseUrl,"/teams/").concat(n,"/").concat(t._id,"/").concat(r),{headers:{Authorization:"Bearer ".concat(e.token)}});case 3:i([]),e.onTeamChanged();case 5:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("invite",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p("withdraw",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var a=Object(b.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure you want to reject this participant?")){a.next=4;break}return a.next=4,fetch("".concat(N.baseUrl,"/teams/update/").concat(t._id,"/teammates/kick/").concat(n),{method:"put",headers:{Authorization:"Bearer ".concat(e.token)}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=Object(je.a)(u.current,"input").pipe(Object(ge.a)((function(e){return e.target.value})),Object(ve.a)(500),Object(ye.a)()).subscribe((function(e){return d(e)}));return function(){return e.unsubscribe()}})),r.a.createElement("div",{className:"team-settings-container"},r.a.createElement("h1",{className:"team-name-header"},t.name),r.a.createElement("div",{className:"teammates-container"},r.a.createElement("ul",{className:"teammates-list"},t.teammates.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement(ke,{key:t._id,onReject:y,user:e.user,teammate:t}))})))),r.a.createElement("div",{className:"invite-teammate-container",style:{borderColor:m[a].foreground}},r.a.createElement("h2",{className:"secondary-settings-header"},"Already invited users"),r.a.createElement("ul",{className:"search-result-list"},t.invitations.map((function(e){return r.a.createElement("li",{className:"user-mini",key:e.userId},r.a.createElement("div",{className:"user-mini-img",style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(e.imageSrc,")")}}),r.a.createElement(s.b,{style:{marginRight:"15px"},target:"_blank",to:"/profile/".concat(e._id)},e.name),r.a.createElement("button",{onClick:function(){return g(e.userId)},className:"user-withdraw-btn"},"Withdraw"))})))),r.a.createElement("div",{className:"invite-teammate-container",style:{borderColor:m[a].foreground}},r.a.createElement("h2",{className:"secondary-settings-header"},"Invite participants"),r.a.createElement(w,null,r.a.createElement("label",null,"Global users search"),r.a.createElement("input",{ref:u,type:"text",placeholder:"type name or uid here..."})),r.a.createElement("ul",{className:"search-result-list"},l.map((function(e){return r.a.createElement("li",{className:"user-mini",key:e._id},r.a.createElement("div",{className:"user-mini-img",style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(e.imageSrc,")")}}),r.a.createElement(s.b,{target:"_blank",to:"/profile/".concat(e._id)},e.name),r.a.createElement("span",{className:"user-mini-uuid",style:{color:"dark"===a?"#43527B":"#b2b2b2"}},"#",e.uuid),e.invited?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{disabled:!0,onClick:function(){return h(e._id)},className:"disabled user-invite-btn"},"Pending"),r.a.createElement("button",{onClick:function(){return g(e._id)},className:"user-withdraw-btn"},"Withdraw")):r.a.createElement("button",{onClick:function(){return h(e._id)},className:"user-invite-btn"},"Invite"))})))))};var xe=Object(i.b)((function(e){return{token:e.auth.token,user:e.user.userData}}))((function(e){var t=e.match.params.teamId,a=Object(n.useState)(!1),c=Object(E.a)(a,2),o=c[0],l=c[1],i=e.user,s=function(){var e=Object(b.a)(f.a.mark((function e(){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/teams/get/by/id/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,i._id===n.ownerId&&l(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i&&s()}),[i]),o&&r.a.createElement(Oe,{onTeamChanged:s,user:i,token:e.token,team:o})}));a(165);var we=function(e){var t=e.match.params.teamId,a=Object(n.useState)(!1),c=Object(E.a)(a,2),o=c[0],l=c[1],i=function(){var e=Object(b.a)(f.a.mark((function e(){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/teams/get/").concat(t,"/public"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,l(n),console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),o?r.a.createElement("div",{className:"team-main-container"},r.a.createElement("div",{className:"team-img",style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(o.imageSrc,")")}}),r.a.createElement("h1",{className:"team-name"},o.name),r.a.createElement("div",{className:"techonologies"},r.a.createElement("ul",null,function(e){if(e.technologies&&e.technologies.length>0)return e.technologies.map((function(e,t){return r.a.createElement("li",{key:t},e)}))}(o))),r.a.createElement("h3",{className:"team-description"},o.description),r.a.createElement("h3",{className:"team-teammates"},r.a.createElement(U.a,{icon:D.o}),r.a.createElement("span",null,o.teammates))):r.a.createElement("p",null,"loading...")};a(166);function Ne(e){var t=e.name,a=e._id,n=e.bio,c=e.imageSrc;return r.a.createElement(s.b,{style:{margin:"30px"},to:"/profile/".concat(a)},r.a.createElement("div",{className:"user-preview-container"},r.a.createElement("div",{style:{backgroundImage:"url(".concat(N.baseUrl,"/").concat(c,")")},className:"user-image-wrap"}),r.a.createElement("div",{className:"user-info"},r.a.createElement("h3",null,t),r.a.createElement("h4",null,function(e){return"".concat(e.substr(0,200),"...")}(n)))))}var Se=function(){var e=Object(n.useContext)(v).theme,t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(E.a)(a,2),o=c[0],l=c[1];Object(n.useEffect)((function(){var e=Object(je.a)(t.current,"input").pipe(Object(ge.a)((function(e){return e.target.value})),Object(ve.a)(500),Object(ye.a)()).subscribe((function(e){return i(e)}));return function(){return e.unsubscribe()}}));var i=function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/users/search/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,l(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"main-search-container"},r.a.createElement("div",{className:"search-bar"},r.a.createElement("h1",null,"Find teammate by name or technology"),r.a.createElement("input",{ref:t,placeholder:"Steve Jo...",className:"search-field search-field-".concat(e),type:"text"})),r.a.createElement("div",{className:"search-results"},r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(Ne,e))})))))},Ie=a(67),Ce=a.n(Ie),_e=(a(190),{iceServers:[{urls:"stun:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"},{urls:"turn:numb.viagenie.ca",username:"sultan1640@gmail.com",credential:"98376683"}]});var Ae=Object(i.b)((function(e){return{p2p:e.p2p,socket:e.socket.socket,user:e.user.userData}}))((function(e){var t,a,c,o=e.user,l=e.p2p,i=e.socket,s=Object(n.useRef)(),u=Object(n.useRef)(),m=Object(n.useRef)(),d=Object(n.useRef)(),p=Object(n.useRef)(),h=Object(n.useRef)(),g=Object(n.useState)(!1),v=Object(E.a)(g,2),y=(v[0],v[1]),j=Object(n.useState)(!1),k=Object(E.a)(j,2),O=k[0],x=k[1],w=Object(n.useState)(!1),N=Object(E.a)(w,2),S=N[0],I=N[1],C=Object(n.useState)(!0),_=Object(E.a)(C,2),A=_[0],T=_[1],F=Object(n.useState)(!0),R=Object(E.a)(F,2),L=R[0],z=R[1],B=Object(n.useState)(null),P=Object(E.a)(B,2),V=P[0],Z=P[1],q=Object(n.useRef)(),J=!1,Y=function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:a=e.sent,z(t),a.getVideoTracks()[0].enabled=t,m.current.srcObject=a,s.current=a;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){i&&o&&i.on("you have a call",(function(t){t.to.userId===o._id&&(Z(t.to.teamId),e.dispatch(Ee(t.from)),q.current=t)}))}),[i,o]);var G=function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.current.muted=!0,u.current.src="",I(!1),e.next=5,Y(t);case 5:x(!0),a=s.current,n=q.current,h.current=new Ce.a({initiator:!1,trickle:!1,stream:a,config:_e}),h.current.on("signal",(function(e){i.emit("accept call",{signalFromPartner:e,from:{name:o.name,imageSrc:o.imageSrc,userId:o._id},to:{teamId:n.to.teamId,userId:n.from.userId}})})),h.current.on("stream",(function(e){d.current.srcObject=e})),h.current.on("close",(function(){})),J||(J=!0,h.current.signal(n.signalFromCaller)),i.on("call interrupted",(function(e){window.location.reload()}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,Y(!1);case 3:t=new Ce.a({initiator:!0,trickle:!1,stream:s.current,config:_e}),p.current=t,t.on("signal",(function(e){J||(J=!0,i.emit("try call",{signalFromCaller:e,from:{name:o.name,imageSrc:o.imageSrc,userId:o._id},to:{teamId:l.subscriber.teamId,userId:l.subscriber.whom._id}}))})),t.on("stream",(function(e){d.current.srcObject=e})),i.on("call accepted",(function(e){t.signal(e.signalFromPartner)})),t.on("close",(function(){H()})),i.on("call interrupted",(function(e){window.location.reload()}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){x(e.p2p.tryCall),y(e.p2p.subscriber),e.p2p.tryCall&&K(e.p2p.subscriber)}),[e.p2p.tryCall]),Object(n.useEffect)((function(){l.callFrom&&(u.current.muted=!1,I(!0),u.current.src="https://dev-parties.herokuapp.com/audio/rington1.mp3",u.current.play())}),[l.callFrom]);var H=function(){i.emit("put call down",{to:{teamId:V}}),u.current.muted=!0,u.current.src="",I(!1),e.dispatch(Ee(null))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("audio",{muted:!0,ref:u,src:""}),r.a.createElement("div",{className:"incoming-call ".concat(S?"incoming-show":"incoming-hide")},r.a.createElement("div",{className:"incoming-user-img",style:{backgroundUrl:null===(t=l.callFrom)||void 0===t?void 0:t.imageSrc}},null===(a=l.callFrom)||void 0===a?void 0:a.name.substr(0,2)),r.a.createElement("div",{className:"incoming-user-name"},null===(c=l.callFrom)||void 0===c?void 0:c.name),r.a.createElement("div",{className:"incoming-call-buttons"},r.a.createElement("div",{onClick:function(){return G(!1)},style:{background:"#42AF2C"},className:"micro-switch-btn call-btn"},r.a.createElement(U.a,{icon:D.d})),r.a.createElement("div",{onClick:function(){return G(!0)},style:{background:"#42AF2C"},className:"video-switch-btn call-btn"},r.a.createElement(U.a,{icon:D.p})),r.a.createElement("div",{onClick:function(){return H()},style:{background:"#DF3A3A",transform:"rotate(-138deg)"},className:"end-call-btn call-btn"},r.a.createElement(U.a,{icon:D.h})))),r.a.createElement("div",{className:"call-container ".concat(O&&"show-mini")},r.a.createElement("video",{id:"localVideo",ref:m,autoPlay:!0,muted:!0}),r.a.createElement("video",{id:"partnerVideo",ref:d,autoPlay:!0}),r.a.createElement("div",{className:"call-buttons"},r.a.createElement("div",{style:{background:A?"#42AF2C":"#DF3A3A"},onClick:function(){s.current.getAudioTracks()[0].enabled=!s.current.getAudioTracks()[0].enabled,T(!A)},className:"micro-switch-btn call-btn"},r.a.createElement(U.a,{icon:A?D.d:D.e})),r.a.createElement("div",{style:{background:L?"#42AF2C":"#DF3A3A"},onClick:function(){s.current.getVideoTracks()[0].enabled=!s.current.getVideoTracks()[0].enabled,z(!L)},className:"video-switch-btn call-btn"},r.a.createElement(U.a,{icon:L?D.p:D.q})),r.a.createElement("div",{onClick:function(){return H()},style:{background:"#DF3A3A",transform:"rotate(-138deg)"},className:"end-call-btn call-btn"},r.a.createElement(U.a,{icon:D.h})))))}));var Te=Object(i.b)((function(e){return{email:e.user.userData.email,token:e.auth.token,userId:e.user.userData._id}}))((function(e){var t=e.email,a=e.token,c=e.userId,o=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(N.baseUrl,"/users/email/confirm"),{method:"post",body:JSON.stringify({redirectUrl:"".concat(window.location.origin,"/#/profile/").concat(c)}),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[c]),t?r.a.createElement("div",{style:{height:"90vh",display:"flex",textAlign:"center",justifyContent:"center",alignItems:"center"}},r.a.createElement("h1",{style:{fontSize:"4rem",margin:"40px"}},"Confirmation email has been sent to ",r.a.createElement("br",null),r.a.createElement(H,{label:"email"},"\ud83d\udc8c"),r.a.createElement("span",{style:{color:"deeppink"}},t),r.a.createElement(H,{label:"email"},"\ud83d\udc8c"))):r.a.createElement("p",null,"loading...")}));var Fe,Re,Ue,De=function(e){var t=e.component,a=e.signedIn,n=Object(l.a)(e,["component","signedIn"]);return r.a.createElement(u.b,Object.assign({},n,{component:t}),"false"==a&&r.a.createElement(u.a,{to:"/"}))},Le=Object(i.b)((function(e){return{signedIn:e.auth.signedIn}}))((function(e){var t=e.dispatch,a=e.signedIn;return Object(n.useEffect)((function(){t(function(){var e=Object(b.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N.baseUrl,"/token/refresh"),{method:"get",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"});case 2:if(!(a=e.sent).ok){e.next=12;break}return e.next=6,a.json();case 6:n=e.sent,t(P(n)),t(B(n.userId)),localStorage.setItem("signedIn","true"),e.next=13;break;case 12:localStorage.setItem("signedIn","false");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement(s.a,null,r.a.createElement(y,null,r.a.createElement(Z,null),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/profile/:userId",component:W}),r.a.createElement(u.b,{path:"/search",component:Se}),r.a.createElement(u.b,{path:"/confirm/",signedIn:a,component:q}),r.a.createElement(De,{path:"/settings/",signedIn:a,component:$}),r.a.createElement(De,{path:"/teams/create",signedIn:a,component:re}),r.a.createElement(De,{path:"/teams/thread/:teamId",exact:!0,component:he,signedIn:a}),r.a.createElement(De,{path:"/teams/thread/:teamId/settings",component:xe,signedIn:a}),r.a.createElement(De,{path:"/re-confirm/",signedIn:a,component:Te}),r.a.createElement(u.b,{path:"/",exact:!0,component:d}),r.a.createElement(u.b,{path:"/login",component:K}),r.a.createElement(u.b,{path:"/register",component:R}),r.a.createElement(u.b,{signedIn:a,path:"/team/:teamId",component:we})),r.a.createElement(Ae,null)))})),ze=a(33),Be=a(100),Pe=a(101),Ve=a(15),Ze=a(193),qe=Object(Ze.a)((Fe={},Object(Ve.a)(Fe,"auth/RECIEVE_TOKENS",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{token:t.payload.token,userId:t.payload.userId,errorText:"",signedIn:"true"})})),Object(Ve.a)(Fe,"auth/SET_ERROR_TEXT",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{errorText:t.payload.errorText})})),Object(Ve.a)(Fe,"auth/CLEAR_AUTH_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userId:"",token:"",signedIn:"false"})})),Fe),{userId:"",token:"",errorText:"",signedIn:localStorage.getItem("signedIn")||"false"}),Je=Object(Ze.a)((Re={},Object(Ve.a)(Re,"users/RECIEVE_USER_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userData:t.payload,errorText:""})})),Object(Ve.a)(Re,"users/CLEAR_USER_DATA",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{userData:""})})),Re),{userData:"",errorText:""}),Ye=Object(Ze.a)((Ue={},Object(Ve.a)(Ue,"p2pcall/TRY_CALL",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{tryCall:!0,subscriber:t.payload})})),Object(Ve.a)(Ue,"p2p/CALL_RECIEVED",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{callFrom:t.payload})})),Object(Ve.a)(Ue,"p2p/CALL_INTERRUPTED",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{tryCall:!1,callFrom:null,subscriber:null})})),Ue),{tryCall:!1,subscriber:null,callFrom:null}),Ge=Object(Ze.a)(Object(Ve.a)({},"socket/INITIALIZE_SOCKET",(function(e,t){return Object(j.a)(Object(j.a)({},e),{},{socket:t.payload})})),{socket:null}),Ke=Object(ze.c)({auth:qe,user:Je,p2p:Ye,socket:Ge}),He=Object(Be.createLogger)(),Me=Object(ze.d)(Ke,Object(ze.a)(Pe.a,He));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Me},r.a.createElement(Le,null))),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.eb638225.chunk.js.map